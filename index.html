<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Escape Room: Enor Edition</title>
    <link rel="shortcut icon" href="favicon.ico">
    <style>
        * {box-sizing: border-box}
        body {font-family: Verdana, sans-serif; margin:0; height:100%}
        rect {fill:rgb(255,0,255);stroke-width:3;stroke:rgb(255,255,255);opacity:0.5}
        li { padding: 5px 0px; }

        .img {
            /* background: url("tv_room/tv_static.jpg") no-repeat fixed 50%; */
            background-color: black;
            background-size: cover;
        }

        .content {
            min-height: 100vh;
        }

        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 5%; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        .modal-content p {
            color: white;
        }

        .modal-image {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 70vw;
        }

        table {
            margin-left: 45%; 
        }

        #hole {
            height: 10vh;
            width: 50vw;
            border-radius: 50%;
            position: absolute;
            left: 25%;
            bottom: 5%;
            background-color: gray;
            display: none;
        }

        .container {
            position: relative;
        }

    </style>
</head>
<body>
    <audio id="my_audio" src="Angel.mp3" loop="loop"></audio>
    <div class="img">
        <div class="content"></div>
        <div id="story" class="modal" style="display:block">
            <div class="modal-content" style="background-color: black">
                <p> Blinking into confusion, you and your friends awaken to find yourselves in an unfamiliar, dark room. </p>
                <p> <i> We were just on our way to Eleanor's birthday party… what happened?! </i> </p>
                <p> Hyperventilating and on the verge of a mental breakdown, you realize you and your friends must quickly search for a way out or else you'll miss the party. </p>
                <p> <i> WHERE'S THE LIGHT SWITCH?! </i> </p>
                <br>
                <p style="color:gray"> Created by: Jenny Wen, Patricia Tran </p>
            </div>
        </div>

        <img id="flute" src="pics/flute.png" style="display:none;" onclick="puzzle1()"/></img>
        <div id="puzzle1" class="modal">
            <div class="modal-content">
                <img src="pics/music/flutekeys.jpg" class="modal-image">
                <table>
                    <tr>
                        <td> <input type = "checkbox" name = "Lb"> </td>
                        <td> <input type = "checkbox" name = "LBb"> </td>
                        <td> <input type = "checkbox" name = "L1"> </td>
                        <td> <input type = "checkbox" name = "L2"> </td>
                        <td> <input type = "checkbox" name = "L3"> </td>
                        <td> <input type = "checkbox" name = "LG#"> </td>
                        <td> | </td>
                        <td> <input type = "checkbox" name = "RBb"> </td>
                        <td> <input type = "checkbox" name = "R1"> </td>
                        <td> <input type = "checkbox" name = "RD"> </td>
                        <td> <input type = "checkbox" name = "R2"> </td>
                        <td> <input type = "checkbox" name = "RD#"> </td>
                        <td> <input type = "checkbox" name = "R3"> </td>
                        <td> <input type = "checkbox" name = "REb"> </td>
                        <td> <input type = "checkbox" name = "RC#"> </td>
                        <td> <input type = "checkbox" name = "RC"> </td>
                        <td> <input type = "checkbox" name = "RB"> </td>
                        <td> <input type = "checkbox" name = "Rb"> </td>
                        <td> <button onclick="p1q()"> submit </button> </td>
                    </tr>
                    <tr>
                        <td> Bb </td>
                        <td> B  </td>
                        <td> 1  </td>
                        <td> 2  </td>
                        <td> 3  </td>
                        <td> G# </td>
                        <td> |  </td>
                        <td> Bb </td>
                        <td> 1  </td>
                        <td> D  </td>
                        <td> 2  </td>
                        <td> D# </td>
                        <td> 3  </td>
                        <td> Eb </td>
                        <td> C# </td>
                        <td> C  </td>
                        <td> B  </td>
                        <td> ß  </td>
                    </tr>
                </table>
            </div>
        </div>

        <div style="position: absolute; top: 20%; right: 12%">
            <img src="pics/switch.jpg" onclick="toggle()" id="lightswitch" style="opacity: 0.05; height:10vh">
        </div>

        <div style="position: absolute; top: 80%; right: 12%">
            <a id="door" style="cursor:default; display:none" href="walls.html">
                <svg width="5vw" height="12vh"><rect width="100%" height="100%"/></svg>
            </a>
        </div>

        <img src="pics/music/fingeringchart.jpg" style="position:absolute; top:10%; left: 10%; height: 80%">

        <a href="walls.html"> <div id="hole" onclick="click5()"></div> </a>
    </div>

    <script>
        var p1 = document.getElementById("puzzle1");
        var story = document.getElementById("story");
        
        window.onclick = function(event) {
            if (event.target == p1 || event.target == story) {
                p1.style.display = "none";
                story.style.display = "none";
            }
        }
        
        var light = 0;
        function toggle() {
            if (light % 2 == 1) {
                document.getElementsByClassName("img")[0].style.backgroundColor = 'black';
                document.getElementById("flute").style.opacity = 0.0;
                document.getElementById("lightswitch").style.opacity = 0.05;
            } else {
                document.getElementsByClassName("img")[0].style.backgroundColor = 'white';
                document.getElementById("flute").style = 'position: absolute; top: 10%; left: 20%; height:5vh';
                document.getElementById("lightswitch").style.opacity = 1.0;
                if (light == 0) {
                    document.getElementById("my_audio").play();
                }
            }
            light += 1;
        }

        var Lb =  document.getElementsByName("Lb")[0];
        var LBb = document.getElementsByName("LBb")[0];
        var L1 =  document.getElementsByName("L1")[0];
        var L2 =   document.getElementsByName("L2")[0];
        var L3 =   document.getElementsByName("L3")[0];
        var LGS  =  document.getElementsByName("LG#")[0];
        var RBb =   document.getElementsByName("RBb")[0];
        var R1 =   document.getElementsByName("R1")[0];
        var RD  =  document.getElementsByName("RD")[0];
        var R2 =   document.getElementsByName("R2")[0];
        var RDS =   document.getElementsByName("RD#")[0];
        var R3  =  document.getElementsByName("R3")[0];
        var REb =   document.getElementsByName("REb")[0];
        var RCS =   document.getElementsByName("RC#")[0];
        var RC  =  document.getElementsByName("RC")[0];
        var RB =   document.getElementsByName("RB")[0];
        var Rb =   document.getElementsByName("Rb")[0];

        var notes = [Lb, LBb, L1, L2, L3, LGS, RBb, R1, RD, R2, RDS, R3, REb, RCS, RC, RB, Rb]
        var ans   = [0,    0,  1,  1,  1,   0,   0,  0,  0,  0,   0,  0,   0,   0,  0,  0,  0]
        // var button = document.getElementById("btn");

        var p1correct = 0;
        function puzzle1() {
            p1.style.display = "block";
        }
        function p1q() {
            var count = 0;
            for (let i = 0; i < ans.length; i++) {
                if (notes[i].checked != ans[i]) {
                    alert("wrong");
                    return
                }
            }
            p1correct = true;
            alert("a gaping hole appears under your feet.");
            document.getElementById("hole").style.display = "block";
            // if(b.checked) {
            //     document.getElementById("door").style.display = "block"
            // }
        }
    </script>

</body>
</html>
