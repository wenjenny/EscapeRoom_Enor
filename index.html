<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Escape Room: Enor Edition</title>
    <link rel="shortcut icon" href="favicon.ico">
    <style>
        * {box-sizing: border-box}
        body {font-family: Verdana, sans-serif; margin:0; height:100%}
        rect {fill:rgb(255,0,255);stroke-width:3;stroke:rgb(255,255,255);opacity:0.5}
        li { padding: 5px 0px; }

        .img {
            /* background: url("tv_room/tv_static.jpg") no-repeat fixed 50%; */
            background-color: black;
            background-size: cover;
        }

        .content {
            min-height: 100vh;
        }

        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 5%; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        .modal-content p {
            color: white;
        }

        .modal-image {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 70vw;
        }

        table {
            margin-left: 45%; 
        }

        #hole {
            height: 8vh;
            width: 50vw;
            border-radius: 50%;
            position: absolute;
            left: 25%;
            bottom: 2%;
            background-color: black;
            display: none;
        }

        .container {
            position: relative;
        }

    </style>
</head>
<body>
    <audio id="my_audio" src="audio/chord.m4a" loop="loop"></audio>
    <div class="img">
        <div class="content"></div>
        <div id="story" class="modal" style="display:block">
            <div class="modal-content" style="background-color: black">
                <p> Blinking into confusion, you and your friends awaken to find yourselves in an unfamiliar, dark room. </p>
                <p> <i> We were just on our way to Eleanor's birthday party… what happened?! </i> </p>
                <p> Hyperventilating and on the verge of a mental breakdown, you realize you and your friends must quickly search for a way out or else you'll miss the party. </p>
                <p> <i> WHERE'S THE LIGHT SWITCH?! </i> </p>
                <br>
                <p style="color:gray"> Created by: Jenny Wen, Patricia Tran </p>
            </div>
        </div>

        <div style="position: absolute; top: 40%; right: 5%">
            <img src="pics/music/switch.jpg" onclick="toggle()" id="lightswitch" style="opacity: 0.05; height:10vh">
        </div>

        <div style="position: absolute; top: 80%; right: 12%">
            <a id="door" style="cursor:default; display:none" href="walls.html">
                <svg width="5vw" height="12vh"><rect width="100%" height="100%"/></svg>
            </a>
        </div>

        <img style="display:none" src="pics/music/fingeringchart.jpg" id="chart" onclick="dominoes()">
        <div id="dom" class="modal" style="display:none">
            <div class="modal-content">
                <img src="pics/music/puzzle.png" class="modal-image" style="width:60vw">
            </div>
        </div>

        <!-- <img src="pics/music/violin.png" id="violin"> -->
        <img style="display: none;" src="pics/music/fingeringchartc.jpg" id="cellochart">
        <img style="display: none;" src="pics/music/keyboardchart.jpg" id="pianochart">
        <img style="display: none;" src="pics/music/stand.png" id="flutestand">
        <img style="display: none;" src="pics/music/stand.png" id="cellostand">
        <img style="display: none;" src="pics/music/cdl.jpg" id="flutemusic">
        <img style="display: none;" src="pics/music/cdl.jpg" id="cellomusic">
        <img style="display: none;" src="pics/music/cello.png" id="cello">
        <img style="display: none;" src="pics/music/piano.png" id="piano">
        
        <img id="flute" src="pics/music/flute.png" style="display:none;" onclick="puzzle1()"/></img>
        <div id="puzzle1" class="modal">
            <div class="modal-content">
                <img src="pics/music/flutekeys.jpg" class="modal-image">
                <table>
                    <tr>
                        <td> <input type = "checkbox" name = "LBb"> </td>
                        <td> <input type = "checkbox" name = "LB"> </td>
                        <td> <input type = "checkbox" name = "L1"> </td>
                        <td> <input type = "checkbox" name = "L2"> </td>
                        <td> <input type = "checkbox" name = "L3"> </td>
                        <td> <input type = "checkbox" name = "LG#"> </td>
                        <td> | </td>
                        <td> <input type = "checkbox" name = "RBb"> </td>
                        <td> <input type = "checkbox" name = "R1"> </td>
                        <td> <input type = "checkbox" name = "RD"> </td>
                        <td> <input type = "checkbox" name = "R2"> </td>
                        <td> <input type = "checkbox" name = "RD#"> </td>
                        <td> <input type = "checkbox" name = "R3"> </td>
                        <td> <input type = "checkbox" name = "REb"> </td>
                        <td> <input type = "checkbox" name = "RC#"> </td>
                        <td> <input type = "checkbox" name = "RC"> </td>
                        <td> <input type = "checkbox" name = "RB"> </td>
                        <td> <input type = "checkbox" name = "Rb"> </td>
                        <td> <button onclick="p1q()"> submit </button> </td>
                    </tr>
                    <tr>
                        <td> Bb </td>
                        <td> B  </td>
                        <td> 1  </td>
                        <td> 2  </td>
                        <td> 3  </td>
                        <td> G# </td>
                        <td> |  </td>
                        <td> Bb </td>
                        <td> 1  </td>
                        <td> D  </td>
                        <td> 2  </td>
                        <td> D# </td>
                        <td> 3  </td>
                        <td> Eb </td>
                        <td> C# </td>
                        <td> C  </td>
                        <td> B  </td>
                        <td> ß  </td>
                    </tr>
                </table>
            </div>
        </div>
        <a href="walls.html"> <div id="hole" onclick="click5()"></div> </a>
    </div>

    <script>
        var p1 = document.getElementById("puzzle1");
        var story = document.getElementById("story");
        var dom = document.getElementById("dom");
        
        window.onclick = function(event) {
            if (event.target == p1 || event.target == story || event.target == dom) {
                p1.style.display = "none";
                story.style.display = "none";
                dom.style.display = "none";
            }
        }
        
        var light = 0;
        function toggle() {
            if (light % 2 == 1) {
                document.getElementsByClassName("img")[0].style.backgroundImage = '';
                document.getElementsByClassName("img")[0].style.backgroundColor = 'black';
                document.getElementById("lightswitch").style.opacity = 0.05;

                document.getElementById("flute").style.opacity = 0.0;
                // document.getElementById("violin").style.opacity = 0.0;
                document.getElementById("cello").style.opacity = 0.0;
                document.getElementById("piano").style.opacity = 0.0;
                
                document.getElementById("chart").style.opacity = 0.0;
                document.getElementById("cellochart").style.opacity = 0.0;
                document.getElementById("pianochart").style.opacity = 0.0;

                document.getElementById("cellostand").style.opacity = 0.0;
                document.getElementById("flutestand").style.opacity = 0.0;
                document.getElementById("cellomusic").style.opacity = 0.0;
                document.getElementById("flutemusic").style.opacity = 0.0;
            } else {
                document.getElementsByClassName("img")[0].style.backgroundImage = 'url("pics/music/wall.png")';
                document.getElementById("lightswitch").style.opacity = 1.0;
                
                document.getElementById("flute").style = 'position: absolute; bottom: 5%; left: 10%; width:20vw';
                // document.getElementById("violin").style = "position:absolute; bottom:5%; left: 40%; width: 13%";
                document.getElementById("cello").style = "position:absolute; bottom:5%; left: 49%; width: 18%";
                document.getElementById("piano").style = "position:absolute; bottom:5%; left: 72%; width: 25%";

                document.getElementById("chart").style = "position:absolute; top:10%; left: 5%; height: 60%";
                document.getElementById("cellochart").style = "position:absolute; top:10%; left: 40%; height: 50%";
                document.getElementById("pianochart").style = "position:absolute; top:10%; left: 72%; width: 25%";

                document.getElementById("flutestand").style = "position:absolute; bottom:5%; left: 20%; height: 50%";
                document.getElementById("cellostand").style = "position:absolute; bottom:5%; left: 53%; height: 50%";
                document.getElementById("flutemusic").style = "position:absolute; bottom:45%; left: 30%; height: 15%";
                document.getElementById("cellomusic").style = "position:absolute; bottom:45%; left: 63%; height: 15%";
                if (light == 0) {
                    document.getElementById("my_audio").play();
                }
            }
            light += 1;
        }

        var LBb = document.getElementsByName("LBb")[0];
        var LB =  document.getElementsByName("LB")[0];
        var L1 =  document.getElementsByName("L1")[0];
        var L2 =   document.getElementsByName("L2")[0];
        var L3 =   document.getElementsByName("L3")[0];
        var LGS  =  document.getElementsByName("LG#")[0];
        var RBb =   document.getElementsByName("RBb")[0];
        var R1 =   document.getElementsByName("R1")[0];
        var RD  =  document.getElementsByName("RD")[0];
        var R2 =   document.getElementsByName("R2")[0];
        var RDS =   document.getElementsByName("RD#")[0];
        var R3  =  document.getElementsByName("R3")[0];
        var REb =   document.getElementsByName("REb")[0];
        var RCS =   document.getElementsByName("RC#")[0];
        var RC  =  document.getElementsByName("RC")[0];
        var RB =   document.getElementsByName("RB")[0];
        var Rb =   document.getElementsByName("Rb")[0];

        var notes = [LBb, LB, L1, L2, L3, LGS, RBb, R1, RD, R2, RDS, R3, REb, RCS, RC, RB, Rb]
        var ans   = [  0,  1,  0,  1,  1,   0,   0,  1,  0,  1,   0,  1,   1,   0,  0,  0,  0]

        var p1correct = 0;
        function puzzle1() {
            p1.style.display = "block";
        }
        function p1q() {
            var count = 0;
            for (let i = 0; i < ans.length; i++) {
                if (notes[i].checked != ans[i]) {
                    alert("It sounds like you need practice.");
                    return
                }
            }
            p1correct = true;
            alert("Your practice pays off. The pure tone you play is the exact resonant frequency of this room, and a large, gaping hole appears in the middle of the room.");
            document.getElementById("hole").style.display = "block";

            document.getElementById("flute").style.display = "none";
            // document.getElementById("violin").style.display = "none";
            document.getElementById("cello").style.display = "none";
            document.getElementById("piano").style.display = "none";

            document.getElementById("cellostand").style.display = "none";
            document.getElementById("flutestand").style.display = "none";
            document.getElementById("cellomusic").style.display = "none";
            document.getElementById("flutemusic").style.display = "none";
        }
        function dominoes() {
            dom.style.display = "block";
        }
    </script>

</body>
</html>
